<!-- ======================= HTML STRUCTURE ======================= -->
<!DOCTYPE html>
<html lang="es">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Calculadora de Procesos de Panadería</title>
	<link rel="preconnect" href="https://fonts.googleapis.com">
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
	<script src="https://cdn.tailwindcss.com"></script>
	<style>
	  body { font-family: 'Inter', system-ui, sans-serif; }
	  .tab-btn { padding:0.5rem 1rem; font-size:.875rem; font-weight:600; border-radius:.75rem; border:1px solid #d6d3d1; background:#fff; color:#57534e; transition:all .18s; }
	  .tab-btn:hover { background:#f5f5f4; color:#111827; }
	  .tab-btn-active { background:#2563eb; color:#fff; border-color:#2563eb; box-shadow:0 1px 2px rgba(0,0,0,.08); }
	  .metric-badge { display:inline-block; padding:2px 6px; border-radius:6px; font-size:.625rem; font-weight:600; background:#e7e5e4; color:#44403c; }
	  .metric-badge.warn { background:#fee2e2; color:#dc2626; }
	.chart-desc { display:none; font-size:.75rem; line-height:1.1rem; color:#475569; font-style:italic; margin-top:-6px; margin-bottom:10px; padding-left:.75rem; border-left:3px solid #2563eb20; }
	.chart-title { cursor:pointer; }
	.chart-title:hover .info-hint { text-decoration:underline; }
	</style>
</head>
<body class="bg-stone-50 text-stone-800 min-h-screen">
	<!-- ======================= CONTENIDO DEL ORIGINAL ======================= -->
	<div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6">
	<div class="hidden">
		<button id="main-amasadoras" class="px-4 py-2 rounded-l-lg bg-blue-600 text-white font-bold focus:outline-none">Amasadoras</button>
	</div>
	<!-- Section views -->
	...[contenido completo del original leído, ver bloque leído]...
	</div>
</body>
<script>
// ...JS embebido exacto del original, ver bloque leído...
</script>
</html>
<!-- ======================= HTML STRUCTURE ======================= -->
<!-- ======================= HTML STRUCTURE ======================= -->
<!DOCTYPE html>
<html lang="es">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Calculadora de Procesos de Panadería</title>
	<link rel="preconnect" href="https://fonts.googleapis.com">
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
	<script src="https://cdn.tailwindcss.com"></script>
	<script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>
	<script src="https://cdn.jsdelivr.net/npm/jspdf@2.5.1/dist/jspdf.umd.min.js"></script>
	<script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.4/dist/chart.umd.min.js"></script>
	<style>
	  body { font-family: 'Inter', system-ui, sans-serif; }
	  .tab-btn { padding:0.5rem 1rem; font-size:.875rem; font-weight:600; border-radius:.75rem; border:1px solid #d6d3d1; background:#fff; color:#57534e; transition:all .18s; }
	  .tab-btn:hover { background:#f5f5f4; color:#111827; }
	  .tab-btn-active { background:#2563eb; color:#fff; border-color:#2563eb; box-shadow:0 1px 2px rgba(0,0,0,.08); }
	  .metric-badge { display:inline-block; padding:2px 6px; border-radius:6px; font-size:.625rem; font-weight:600; background:#e7e5e4; color:#44403c; }
	  .metric-badge.warn { background:#fee2e2; color:#dc2626; }
	.chart-desc { display:none; font-size:.75rem; line-height:1.1rem; color:#475569; font-style:italic; margin-top:-6px; margin-bottom:10px; padding-left:.75rem; border-left:3px solid #2563eb20; }
	.chart-title { cursor:pointer; }
	.chart-title:hover .info-hint { text-decoration:underline; }
	</style>
</head>
<body class="bg-stone-50 text-stone-800 min-h-screen">
	<div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6">
	<div class="hidden">
		<button id="main-amasadoras" class="px-4 py-2 rounded-l-lg bg-blue-600 text-white font-bold focus:outline-none">Amasadoras</button>
	</div>
	<!-- Section views -->
	<div id="section-amasadoras">
		<div class="flex flex-wrap justify-center gap-3 mb-6">
			<button id="tab-medicion" class="tab-btn tab-btn-active">Medición</button>
			<button id="tab-resultados" class="tab-btn">Resultados</button>
			<button id="tab-tablas" class="tab-btn">Tablas</button>
		</div>
		<div id="view-tablas" class="hidden">
			<div class="mb-6 text-center">
				<h2 class="text-3xl font-extrabold mb-2 text-stone-900 tracking-tight">Tablas y Gráficas</h2>
				<p class="text-stone-600 max-w-2xl mx-auto">Promedios, desviaciones y distribución visual por tipo de masa, amasadora y procesos.</p>
			</div>
			<div class="mb-8 max-w-3xl mx-auto">
				<details open class="bg-white border border-stone-300 rounded-xl p-4 shadow-sm">
					<summary class="cursor-pointer select-none font-semibold text-stone-800 text-lg">Mapeo de gráficas y propósito analítico</summary>
					<div class="mt-3 text-sm space-y-3 text-stone-700">
						<ul class="list-disc ml-5 space-y-1">
							<li><span class="font-medium">Benchmark entre recetas (1 y 6)</span>: Promedios por tipo de masa (tiempos) y Temperatura de masa por tipo de masa.</li>
							<li><span class="font-medium">Detecta dónde optimizar (2, 3 y 7)</span>: Promedios por amasadora, Promedios por proceso, Tiempos productivos vs muertos.</li>
							<li><span class="font-medium">Control de consistencia y calidad (4, 5 y 6)</span>: Temperatura de masa (general), Temp. masa (Amasadora vs Tipo), Temp. masa por tipo.</li>
							<li><span class="font-medium">Validar hipótesis de proceso (8)</span>: Relación temperatura de masa vs tiempo total (scatter + regresión).</li>
						</ul>
						<p class="text-xs text-stone-500">Los números refieren al orden visual aproximado de las secciones inferiores.</p>
					</div>
				</details>
			</div>
			<div id="tablas-wrapper" class="space-y-10">
				<section>
					<h3 class="chart-title text-xl font-bold mb-1 text-stone-800">Resumen de tiempos (s) <span class="info-hint text-blue-600 cursor-help align-middle" title="Indicadores globales: registros, promedio total y variabilidad.">ℹ️</span></h3>
					<p class="chart-desc">Muestra KPIs globales: número de registros, promedio total y dispersión (desviación y %). Punto de partida para ver si el proceso se estabiliza.</p>
					<div id="tabla-resumen" class="overflow-x-auto text-sm"></div>
				</section>
				...existing code from original index.html (todo el HTML y JS embebido real aquí)...
			</div>
		</div>
	</div>
</body>
<script>
// ...todo el JS embebido real del index.html original aquí...
</script>
</html>
<!-- ======================= HTML STRUCTURE ======================= -->
<!DOCTYPE html>
<html lang="es">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Calculadora de Procesos de Panadería</title>
	<link rel="preconnect" href="https://fonts.googleapis.com">
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
	<script src="https://cdn.tailwindcss.com"></script>
	<style>
	  body { font-family: 'Inter', system-ui, sans-serif; }
	  .tab-btn { padding:0.5rem 1rem; font-size:.875rem; font-weight:600; border-radius:.75rem; border:1px solid #d6d3d1; background:#fff; color:#57534e; transition:all .18s; }
	  .tab-btn:hover { background:#f5f5f4; color:#111827; }
	  .tab-btn-active { background:#2563eb; color:#fff; border-color:#2563eb; box-shadow:0 1px 2px rgba(0,0,0,.08); }
	  .metric-badge { display:inline-block; padding:2px 6px; border-radius:6px; font-size:.625rem; font-weight:600; background:#e7e5e4; color:#44403c; }
	  .metric-badge.warn { background:#fee2e2; color:#dc2626; }
	.chart-desc { display:none; font-size:.75rem; line-height:1.1rem; color:#475569; font-style:italic; margin-top:-6px; margin-bottom:10px; padding-left:.75rem; border-left:3px solid #2563eb20; }
	.chart-title { cursor:pointer; }
	.chart-title:hover .info-hint { text-decoration:underline; }
	</style>
</head>
<body class="bg-stone-50 text-stone-800 min-h-screen">
	<div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6">
	<div class="hidden">
		<button id="main-amasadoras" class="px-4 py-2 rounded-l-lg bg-blue-600 text-white font-bold focus:outline-none">Amasadoras</button>
	</div>
	<!-- Section views -->
	<div id="section-amasadoras">
		<div class="flex flex-wrap justify-center gap-3 mb-6">
			<button id="tab-medicion" class="tab-btn tab-btn-active">Medición</button>
			<button id="tab-resultados" class="tab-btn">Resultados</button>
			<button id="tab-tablas" class="tab-btn">Tablas</button>
		</div>
		<div id="view-tablas" class="hidden">
			<div class="mb-6 text-center">
				<h2 class="text-3xl font-extrabold mb-2 text-stone-900 tracking-tight">Tablas y Gráficas</h2>
				<p class="text-stone-600 max-w-2xl mx-auto">Promedios, desviaciones y distribución visual por tipo de masa, amasadora y procesos.</p>
			</div>
			<div class="mb-8 max-w-3xl mx-auto">
				<details open class="bg-white border border-stone-300 rounded-xl p-4 shadow-sm">
					<summary class="cursor-pointer select-none font-semibold text-stone-800 text-lg">Mapeo de gráficas y propósito analítico</summary>
					<div class="mt-3 text-sm space-y-3 text-stone-700">
						<ul class="list-disc ml-5 space-y-1">
							<li><span class="font-medium">Benchmark entre recetas (1 y 6)</span>: Promedios por tipo de masa (tiempos) y Temperatura de masa por tipo de masa.</li>
							<li><span class="font-medium">Detecta dónde optimizar (2, 3 y 7)</span>: Promedios por amasadora, Promedios por proceso, Tiempos productivos vs muertos.</li>
							<li><span class="font-medium">Control de consistencia y calidad (4, 5 y 6)</span>: Temperatura de masa (general), Temp. masa (Amasadora vs Tipo), Temp. masa por tipo.</li>
							<li><span class="font-medium">Validar hipótesis de proceso (8)</span>: Relación temperatura de masa vs tiempo total (scatter + regresión).</li>
						</ul>
						<p class="text-xs text-stone-500">Los números refieren al orden visual aproximado de las secciones inferiores.</p>
					</div>
				</details>
			</div>
			<div id="tablas-wrapper" class="space-y-10">
				<section>
					<h3 class="chart-title text-xl font-bold mb-1 text-stone-800">Resumen de tiempos (s) <span class="info-hint text-blue-600 cursor-help align-middle" title="Indicadores globales: registros, promedio total y variabilidad.">ℹ️</span></h3>
					<p class="chart-desc">Muestra KPIs globales: número de registros, promedio total y dispersión (desviación y %). Punto de partida para ver si el proceso se estabiliza.</p>
					<div id="tabla-resumen" class="overflow-x-auto text-sm"></div>
				</section>
				<section>
					<h3 class="chart-title text-xl font-bold mb-1 text-stone-800">Promedios por tipo de masa <span class="info-hint text-blue-600 cursor-help align-middle" title="Tiempo total promedio por receta.">ℹ️</span></h3>
					<p class="chart-desc">Compara recetas y ayuda a detectar cuáles requieren más tiempo total. Útil para priorizar mejoras o ajustar programación.</p>
					<div id="tabla-pan" class="overflow-x-auto text-sm mb-4"></div>
					<canvas id="chart-pan" height="140"></canvas>
				</section>
				<section>
					<h3 class="chart-title text-xl font-bold mb-1 text-stone-800">Promedios por amasadora <span class="info-hint text-blue-600 cursor-help align-middle" title="Comparación entre equipos.">ℹ️</span></h3>
					<p class="chart-desc">Identifica máquinas más lentas o con tiempos fuera de rango para redistribuir cargas o revisar mantenimiento.</p>
					<div id="tabla-amasadora" class="overflow-x-auto text-sm mb-4"></div>
					<canvas id="chart-amasadora" height="140"></canvas>
				</section>
				<section>
					<h3 class="chart-title text-xl font-bold mb-1 text-stone-800">Promedios por proceso <span class="info-hint text-blue-600 cursor-help align-middle" title="Duración típica de cada etapa.">ℹ️</span></h3>
					<p class="chart-desc">Revela cuál de las 3 etapas domina el ciclo y dónde un ajuste reduciría más el tiempo total.</p>
					<div id="tabla-proceso" class="overflow-x-auto text-sm mb-4"></div>
					<canvas id="chart-proceso" height="140"></canvas>
				</section>
				<section>
					<h3 class="chart-title text-xl font-bold mb-1 text-stone-800">Temperatura de masa <span class="info-hint text-blue-600 cursor-help align-middle" title="Temperatura promedio por tipo de masa.">ℹ️</span></h3>
					<p class="chart-desc">Controla la consistencia térmica: variaciones grandes pueden afectar fermentación o calidad final.</p>
					<div id="tabla-temp" class="overflow-x-auto text-sm mb-4"></div>
					<canvas id="chart-temp-pan" height="140" class="mb-8"></canvas>
				</section>
				<section>
					<h3 class="chart-title text-xl font-bold mb-1 text-stone-800">Temp. masa (Amasadora vs Tipo de masa) <span class="info-hint text-blue-600 cursor-help align-middle" title="Cruce equipo vs receta.">ℹ️</span></h3>
					<p class="chart-desc">Detecta si ciertas máquinas generan sistemáticamente temperaturas distintas para la misma receta.</p>
					<div id="tabla-temp-cruzada" class="overflow-x-auto text-sm"></div>
				</section>
				<section>
					<h3 class="chart-title text-xl font-bold mb-1 text-stone-800">Distribución tiempos por tipo de masa (Boxplot) <span class="info-hint text-blue-600 cursor-help align-middle" title="Variabilidad por receta.">ℹ️</span></h3>
					<p class="chart-desc">Mide estabilidad operativa: IQR reducido indica proceso controlado; valores altos sugieren inconsistencia.</p>
					<canvas id="chart-boxplot-tipo" height="140"></canvas>
				</section>
				<section>
					<h3 class="chart-title text-xl font-bold mb-1 text-stone-800">Tiempos productivos vs muertos por amasadora <span class="info-hint text-blue-600 cursor-help align-middle" title="Proporción de inactividad.">ℹ️</span></h3>
					<p class="chart-desc">Cuantifica ineficiencia: mayor porcentaje de tiempo muerto = oportunidad directa de optimización.</p>
					<canvas id="chart-stacked-muertos" height="140"></canvas>
				</section>
				<section>
					<h3 class="chart-title text-xl font-bold mb-1 text-stone-800">Relación temperatura de masa vs tiempo total <span class="info-hint text-blue-600 cursor-help align-middle" title="Correlación tiempo vs calor.">ℹ️</span></h3>
					<p class="chart-desc">Evalúa si la temperatura final se asocia a mayor o menor duración (r cercano a 0 indica poca relación).</p>
					<canvas id="chart-scatter-temp-tiempo" height="160"></canvas>
				</section>
			</div>
			</div>
		</div>
		<div id="view-medicion" class="block">
				<div class="mb-8">
					<h1 class="text-3xl font-extrabold text-stone-900 tracking-tight mb-2">Cálculo de Amasadoras</h1>
					<p class="text-stone-600 text-sm md:text-base">Cómo operar el programa: registra primero las variables generales (fecha, TA, H, personal). Luego en cada tarjeta de amasadora define el tipo de masa y controla los tres procesos secuencialmente. Guarda cada máquina al terminar para formar un conjunto que luego podrás analizar y exportar.</p>
				</div>
				<!-- Instrucciones (migradas desde Resultados) -->
				<div id="instrucciones-medicion" class="mb-8">
					<details open class="bg-white border border-stone-300 rounded-xl p-4 shadow-sm">
						<summary class="cursor-pointer select-none font-semibold text-stone-800 text-lg flex items-center gap-2">
							<span>Instrucciones (crear conjunto, analizar y exportar)</span>
						</summary>
						<div class="mt-3 space-y-3 text-sm leading-relaxed text-stone-700">
							<p><span class="font-semibold">¿Qué es un conjunto?</span> Cada conjunto es un registro de una fecha con una o varias amasadoras (máquinas) y sus 3 procesos: Esponja, Masa y Mantequilla, incluyendo tiempos, temperaturas y observaciones.</p>
							<ol class="list-decimal ml-5 space-y-1">
								<li>Completa <strong>Fecha</strong>, <strong>TA</strong>, <strong>H</strong> y <strong>N° Personal</strong>.</li>
								<li>En cada amasadora define <strong>Tipo de masa</strong>, marca <strong>Hielo</strong> si aplica y al finalizar registra <strong>Temp. de masa</strong> y <strong>Observaciones</strong>.</li>
								<li>Ejecuta los procesos en orden (Iniciar / Detener). Sólo puede estar activo uno por máquina; iniciar otro detiene el previo.</li>
								<li>Se guardan inicio, fin y duración. El <strong>Total máquina</strong> va desde el inicio del primer proceso al fin del tercero. <strong>TM1 / TM2</strong> son los huecos entre procesos.</li>
								<li>Pulsa <strong>Guardar resultados</strong> al terminar los 3 procesos de la máquina. Repite para otras.</li>
								<li>Pasa a la pestaña <strong>Resultados</strong> para ver, filtrar y revisar los conjuntos. Usa filtros para acotar.</li>
								<li><strong>Borrar todo</strong> elimina definitivamente todos los registros guardados.</li>
								<li><strong>Exportar PDF</strong>: reporte visual de la vista de resultados (sin botones).</li>
								<li><strong>Exportar CSV</strong>: filas compactadas (una por proceso) con factores diarios y de máquina sólo en la primera fila de cada máquina. Incluye TM1, TM2, TM.Total y Total(s).</li>
								<li>Si el total supera 45 min (>2700 s) aparece un ícono de advertencia.</li>
							</ol>
							<p class="text-stone-600">Consejo: Usa CSV para análisis (Excel / Power BI) y PDF para difusión rápida.</p>
							<div class="pt-3 border-t border-stone-200"></div>
							<h4 class="font-semibold text-stone-800">Mapeo de gráficas y propósito analítico</h4>
							<ul class="list-disc ml-5 space-y-1">
								<li><span class="font-medium">Benchmark entre recetas (1 y 6)</span>: Promedios por tipo de masa (tiempos) y Temperatura de masa por tipo de masa.</li>
								<li><span class="font-medium">Detecta dónde optimizar (2, 3 y 7)</span>: Promedios por amasadora, Promedios por proceso, Tiempos productivos vs muertos.</li>
								<li><span class="font-medium">Control de consistencia y calidad (4, 5 y 6)</span>: Temperatura de masa (general), Temp. masa (Amasadora vs Tipo), Temp. masa por tipo.</li>
								<li><span class="font-medium">Validar hipótesis de proceso (8)</span>: Relación temperatura de masa vs tiempo total (scatter + regresión).</li>
							</ul>
							<p class="text-xs text-stone-500">Los números refieren al orden aproximado dentro de la pestaña Tablas y Gráficas.</p>
						</div>
					</details>
				</div>
			<div class="mb-6 grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-5">
				<div>
					<label for="fecha" class="block mb-1 text-sm font-semibold text-stone-700">Fecha</label>
					<input type="date" id="fecha" class="w-full px-3 py-2 rounded-lg border border-stone-300 focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white" />
				</div>
				<div>
					<label for="ta" class="block mb-1 text-sm font-semibold text-stone-700">Temp. ambiente (°C)</label>
					<input type="number" id="ta" step="0.1" class="w-full px-3 py-2 rounded-lg border border-stone-300 focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white" placeholder="TA" />
				</div>
				<div>
					<label for="h" class="block mb-1 text-sm font-semibold text-stone-700">Humedad (%)</label>
					<input type="number" id="h" step="0.1" class="w-full px-3 py-2 rounded-lg border border-stone-300 focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white" placeholder="H" />
				</div>
				<div>
					<label for="personal-general" class="block mb-1 text-sm font-semibold text-stone-700">N° Personal</label>
					<input type="number" min="0" id="personal-general" class="w-full px-3 py-2 rounded-lg border border-stone-300 focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white" placeholder="Cantidad" />
				</div>
			</div>
			<main id="machine-cards" class="grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-7 mb-10"></main>
			<div id="msg-guardar" class="mt-2 text-center text-sm"></div>
		</div>
	<!-- Vista de resultados (única) -->
	<div id="view-resultados" class="hidden">
			<div class="mb-4 flex flex-wrap gap-3 justify-end">
				<button id="btn-export-resultados-pdf" class="bg-blue-600 text-white px-4 py-2 rounded-lg font-semibold shadow hover:bg-blue-700 transition-colors">Exportar Resultados (PDF)</button>
				<button id="btn-export-resultados-csv" class="bg-emerald-600 text-white px-4 py-2 rounded-lg font-semibold shadow hover:bg-emerald-700 transition-colors">Exportar Resultados (CSV)</button>
			</div>
			<!-- Filtros para resultados -->
			<div class="flex flex-wrap gap-4 mb-4">
				<input type="date" id="filtro-fecha" class="border rounded px-2 py-1" placeholder="Filtrar por fecha" />
				<input type="text" id="filtro-tipo" class="border rounded px-2 py-1" placeholder="Filtrar por tipo de masa" />
				<input type="text" id="filtro-maquina" class="border rounded px-2 py-1" placeholder="Filtrar por amasadora" />
				<button id="btn-clear-resultados" class="bg-red-500 text-white px-3 py-1 rounded">Borrar todo</button>
			</div>
			<div id="promedios" class="mb-4"></div>
			<div id="resultados-lista"></div>
		</div>
		</div>
	</div>
</body>
<script>
// ...existing code from original index.html (JS and logic)...
</script>
</html>
